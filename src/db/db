const dotenv = require('dotenv')
const path = require('path');
const mysql = require("mysql")
const util = require("util")

dotenv.config({ path: path.join(__dirname, '..','/', '.env') });

const DB_HOST     = process.env.DB_HOST
const DB_DATABASE = process.env.DB_DATABASE
const DB_USER     = process.env.DB_USER
const DB_PASS     = process.env.DB_PASS



const pool = mysql.createPool ({
  connectionLimit: 10,
  host:DB_HOST,
  database:DB_DATABASE,
  user:DB_USER,
  passord:DB_PASS

});

pool.getConnection( (err, connection) => {
  if( err ) {
    console.warn("No se pudo conectar:" , {error:err})
  } else {
    console.log("Conexion exitosa")
  }
});

pool.query = util.promisify(pool.query)

module.exports = pool